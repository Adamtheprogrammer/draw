var draw=function(){var e=document.querySelector("main"),t=document.querySelector("main").offsetWidth,n=document.querySelector("main").offsetHeight,r=document.createElement("canvas"),a=r.getContext("2d"),i=Math.floor(400*Math.random()+50),o=r.getBoundingClientRect(),d=0,c=0,l=0,s=0,u=0,f=0,w=!1,g=!1,h="",m=!1,v="";return document.getElementById("input").addEventListener("click",function(){v=document.getElementById("input").value,console.log(v)}),{setIsDrawing:function(e){m=e},getIsDrawing:function(){return m},getShape:function(){return h},setShape:function(e){h=e},randColor:function(){return"#"+Math.floor(16777215*Math.random()).toString(16)},setStart:function(){l=d,s=c},setEnd:function(){u=d,f=c},setXY:function(e){w=d,g=c,d=e.clientX-o.left-r.offsetLeft,c=e.clientY-o.left-r.offsetTop},writeXY:function(){document.getElementById("trackX").innerHTML="x: "+d,document.getElementById("trackY").innerHTML="y: "+c},draw:function(){switch(a.restore(),h){case"rectangle":this.drawRect();break;case"line":this.drawLine();break;case"circle":this.drawCircle();break;case"path":this.drawPath();break;case"triangle":this.drawTriangle()}a.save()},drawTriangle:function(){console.log(v),a.strokeStyle=v,a.beginPath(),a.moveTo(l,s),a.lineTo(u,f),a.lineTo(u+i,f),a.fill(),console.log(v)},drawPath:function(){a.strokeStyle=this.randColor(),a.beginPath(),a.moveTo(w,g),a.lineTo(d,c),a.stroke()},drawCircle:function(){a.strokeStyle=this.randColor(),a.fillStyle=this.randColor();var e=l-u,t=s-f,n=Math.sqrt(e*e+t*t);a.beginPath(),a.arc(l,s,n,0,2*Math.PI),a.stroke(),a.fill()},drawLine:function(){a.strokeStyle=this.randColor(),a.beginPath(),a.moveTo(l,s),a.lineTo(u,f),a.stroke()},drawRect:function(){a.fillStyle=this.randColor(),a.fillRect(l,s,u-l,f-s),a.strokeStyle=this.randColor()},getCanvas:function(){return r},init:function(){r.width=t,r.height=n,e.appendChild(r)}}}();draw.init(),document.getElementById("btnTriangle").addEventListener("click",function(){draw.setShape("triangle")}),document.getElementById("btnPath").addEventListener("click",function(){draw.setShape("path")}),document.getElementById("btnCircle").addEventListener("click",function(){draw.setShape("circle")}),document.getElementById("btnRect").addEventListener("click",function(){draw.setShape("rectangle")}),document.getElementById("btnLine").addEventListener("click",function(){draw.setShape("line")}),draw.getCanvas().addEventListener("mousedown",function(){draw.setIsDrawing(!0),draw.setStart()}),draw.getCanvas().addEventListener("mouseup",function(){draw.setEnd(),draw.draw(),draw.setIsDrawing(!1)}),draw.getCanvas().addEventListener("mousemove",function(e){draw.setXY(e),draw.writeXY(),"path"===draw.getShape()&&!0===draw.getIsDrawing()&&draw.draw()});